(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(1),a=t.n(c),u=t(14),o=t.n(u),i=t(3),s=function(e){var n=e.person,t=e.id,c=e.deletePerson;return Object(r.jsxs)("p",{children:[Object(r.jsxs)("strong",{children:[n.name,":"]})," ",n.number," \xa0\xa0",Object(r.jsx)("button",{onClick:function(){return c(t)},children:"Delete"})]})},d=function(e){var n=e.persons,t=e.deletePerson;return n.map((function(e){return Object(r.jsx)(s,{person:e,id:e.id,deletePerson:t},e.name)}))},l=function(e){var n=e.handleAddPerson,t=e.handleNewName,c=e.newName,a=e.handleNewNumber,u=e.newNumber;return Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsxs)("div",{children:["name:",Object(r.jsx)("input",{required:!0,type:"text",value:c,onChange:t})]}),Object(r.jsxs)("div",{children:["number:",Object(r.jsx)("input",{required:!0,type:"text",value:u,onChange:a})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},j=function(e){var n=e.searchValue,t=e.handleSearchValue;return Object(r.jsxs)("div",{children:["filter shown with:",Object(r.jsx)("input",{type:"text",value:n,onChange:t})]})},b=function(e){var n=e.message,t=e.type;return null===n?null:Object(r.jsx)("div",{className:"error"===t?"notification error":"notification",children:n})},h=t(4),f=t.n(h),m="/api/persons",O=function(){return f.a.get(m).then((function(e){return e.data}))},p=function(e){return f.a.post(m,e).then((function(e){return e.data}))},x=function(e,n){return f.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},w=function(e){return f.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},v=(t(38),function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],u=Object(c.useState)(""),o=Object(i.a)(u,2),s=o[0],h=o[1],f=Object(c.useState)(""),m=Object(i.a)(f,2),v=m[0],N=m[1],g=Object(c.useState)(null),S=Object(i.a)(g,2),y=S[0],k=S[1],P=Object(c.useState)(""),C=Object(i.a)(P,2),V=C[0],A=C[1],D=Object(c.useState)(""),q=Object(i.a)(D,2),E=q[0],J=q[1];Object(c.useEffect)((function(){O().then((function(e){a(e)}))}),[]);var L=function(e,n){k(e),A(n),setTimeout((function(){k(null),A(null)}),3500)},B=t.filter((function(e){return e.name.toLowerCase().includes(E.trim().toLowerCase())}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Phonebook"}),Object(r.jsx)(b,{message:y,type:V}),Object(r.jsx)("h2",{children:"Search"}),Object(r.jsx)(j,{searchValue:E,handleSearchValue:function(e){J(e.target.value)}}),Object(r.jsx)("h2",{children:"Add a new number"}),Object(r.jsx)(l,{handleAddPerson:function(e){e.preventDefault();var n=s.trim(),r=v.trim(),c={name:n,number:r};if(t.map((function(e){return e.name})).includes(n)){if(window.confirm("".concat(n," is already added to the phonebook. Replace the existing number with a new one?"))){var u=t.filter((function(e){return e.name===n}))[0].id;x(u,c).then((function(e){a(t.map((function(n){return n.id!=u?n:e}))),h(""),N(""),L("".concat(n,"'s phone number was updated!"),"success")})).catch((function(e){a(t.filter((function(e){return e.id!==u}))),L("".concat(n," was already deleted from the database."),"error"),h(""),N("")}))}}else p(c).then((function(e){a(t.concat(e)),h(""),N(""),L("".concat(n,"'s phone number was added!"),"success")}))},handleNewName:function(e){h(e.target.value)},newName:s,handleNewNumber:function(e){N(e.target.value)},newNumber:v}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(d,{persons:B,deletePerson:function(e){var n=t.find((function(n){return n.id===e})).name;window.confirm("Delete ".concat(n,"?"))&&w(e).then((function(){a(t.filter((function(n){return n.id!==e}))),L("".concat(n," was delete!"),"error")})).catch((function(r){a(t.filter((function(n){return n.id!==e}))),L("".concat(n," was already deleted from the database."),"error")}))}})]})});o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(v,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.2653cdc1.chunk.js.map